{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "CPU and Memory Benchmark Test Results Schema",
  "description": "Schema for validating CPU and memory benchmark test results",
  "properties": {
    "test_name": {
      "type": "string",
      "description": "Name of the test run",
      "minLength": 1,
      "maxLength": 255
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when the test was executed"
    },
    "test_duration_sec": {
      "type": "integer",
      "description": "Total test duration in seconds",
      "minimum": 0
    },
    "memory_idle_latency_ns": {
      "type": "number",
      "description": "Memory idle latency in nanoseconds",
      "minimum": 0
    },
    "memory_peak_injection_bandwidth_mbs": {
      "type": "number",
      "description": "Memory peak injection bandwidth in MB/s",
      "minimum": 0
    },
    "ramspeed_smp_bandwidth_mbs_add": {
      "type": "number",
      "description": "RAMspeed SMP bandwidth for ADD operation in MB/s",
      "minimum": 0
    },
    "ramspeed_smp_bandwidth_mbs_copy": {
      "type": "number",
      "description": "RAMspeed SMP bandwidth for COPY operation in MB/s",
      "minimum": 0
    },
    "sysbench_ram_memory_bandwidth_mibs": {
      "type": "integer",
      "description": "Sysbench RAM memory bandwidth in MiB/s",
      "minimum": 0
    },
    "sysbench_ram_memory_test_duration_sec": {
      "type": "integer",
      "description": "Sysbench RAM memory test duration in seconds",
      "minimum": 0
    },
    "sysbench_ram_memory_test_mode": {
      "type": "string",
      "description": "Sysbench RAM memory test mode",
      "enum": ["seq", "rnd", "seqwr", "rndwr"]
    },
    "sysbench_cpu_events_per_second": {
      "type": "integer",
      "description": "Sysbench CPU events per second",
      "minimum": 0
    },
    "sysbench_cpu_duration_sec": {
      "type": "integer",
      "description": "Sysbench CPU test duration in seconds",
      "minimum": 0
    },
    "sysbench_cpu_test_mode": {
      "type": "string",
      "description": "Sysbench CPU test mode",
      "enum": ["cpu", "prime", "factorial"]
    },
    "cpu_utilization_percent": {
      "type": "number",
      "description": "CPU utilization percentage during test",
      "minimum": 0,
      "maximum": 100
    },
    "memory_utilization_percent": {
      "type": "number",
      "description": "Memory utilization percentage during test",
      "minimum": 0,
      "maximum": 100
    },
    "load_average_1min": {
      "type": "number",
      "description": "System load average over 1 minute",
      "minimum": 0
    },
    "load_average_5min": {
      "type": "number",
      "description": "System load average over 5 minutes",
      "minimum": 0
    },
    "load_average_15min": {
      "type": "number",
      "description": "System load average over 15 minutes",
      "minimum": 0
    },
    "threads_used": {
      "type": "integer",
      "description": "Number of threads used in the test",
      "minimum": 1
    },
    "cpu_cores": {
      "type": "integer",
      "description": "Number of CPU cores available",
      "minimum": 1
    },
    "memory_total_mb": {
      "type": "integer",
      "description": "Total system memory in MB",
      "minimum": 0
    },
    "memory_available_mb": {
      "type": "integer",
      "description": "Available system memory in MB",
      "minimum": 0
    },
    "test_parameters": {
      "type": "object",
      "description": "Additional test parameters",
      "properties": {
        "block_size": {
          "type": "string",
          "description": "Memory block size used in tests"
        },
        "access_pattern": {
          "type": "string",
          "description": "Memory access pattern",
          "enum": ["sequential", "random", "mixed"]
        },
        "warmup_time_sec": {
          "type": "integer",
          "description": "Warmup time in seconds",
          "minimum": 0
        },
        "iterations": {
          "type": "integer",
          "description": "Number of test iterations",
          "minimum": 1
        }
      }
    },
    "error_count": {
      "type": "integer",
      "description": "Number of errors encountered during test",
      "minimum": 0
    },
    "warnings": {
      "type": "array",
      "description": "List of warnings generated during test",
      "items": {
        "type": "string"
      }
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata about the test",
      "properties": {
        "tool_version": {
          "type": "string",
          "description": "Version of the benchmarking tool used"
        },
        "os_info": {
          "type": "string",
          "description": "Operating system information"
        },
        "kernel_version": {
          "type": "string",
          "description": "Kernel version"
        },
        "cpu_model": {
          "type": "string",
          "description": "CPU model information"
        },
        "memory_type": {
          "type": "string",
          "description": "Memory type (e.g., DDR4, DDR5)"
        }
      }
    }
  },
  "required": [
    "test_name",
    "timestamp"
  ],
  "additionalProperties": true,
  "examples": [
    {
      "test_name": "cpu_mem_benchmark_001",
      "timestamp": "2024-01-15T14:30:00Z",
      "test_duration_sec": 300,
      "memory_idle_latency_ns": 120.5,
      "memory_peak_injection_bandwidth_mbs": 25600.0,
      "ramspeed_smp_bandwidth_mbs_add": 22400.0,
      "ramspeed_smp_bandwidth_mbs_copy": 21800.0,
      "sysbench_ram_memory_bandwidth_mibs": 24000,
      "sysbench_ram_memory_test_duration_sec": 60,
      "sysbench_ram_memory_test_mode": "seq",
      "sysbench_cpu_events_per_second": 15000,
      "sysbench_cpu_duration_sec": 60,
      "sysbench_cpu_test_mode": "cpu",
      "cpu_utilization_percent": 95.2,
      "memory_utilization_percent": 45.8,
      "load_average_1min": 8.5,
      "load_average_5min": 6.2,
      "load_average_15min": 4.1,
      "threads_used": 8,
      "cpu_cores": 8,
      "memory_total_mb": 32768,
      "memory_available_mb": 28000,
      "test_parameters": {
        "block_size": "4KB",
        "access_pattern": "sequential",
        "warmup_time_sec": 30,
        "iterations": 5
      },
      "error_count": 0,
      "warnings": [],
      "metadata": {
        "tool_version": "sysbench-1.0.20",
        "os_info": "Ubuntu 22.04.3 LTS",
        "kernel_version": "5.15.0-88-generic",
        "cpu_model": "Intel(R) Xeon(R) Gold 6230R CPU @ 2.10GHz",
        "memory_type": "DDR4-3200"
      }
    }
  ]
}
